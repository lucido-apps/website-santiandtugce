{"version":3,"sources":["webpack:///./src/components/BandcampPlayer.tsx","webpack:///./src/templates/release.tsx"],"names":["IFrame","styled","iframe","_templateObject","spinner","BandcampPlayer","container","React","state","width","updateDimensions","_","throttle","_this","newWidth","get","setState","leading","trailing","componentDidMount","this","current","offsetWidth","window","addEventListener","render","_this$props","props","title","url","calcHeight","height","react","UI","ref","minWidth","src","seamless","Section","Box","attrs","pb","release_templateObject","H4","color","_templateObject2","StreamIcons","_ref","mobile","links","Social","pl","pt","iconMaxWidth","maxWidth","mx","display","mobileDisplayToggle","InfoWrap","Flex","pr","flexDirection","_templateObject3","PlayerWrap","_templateObject4","Container","_templateObject5","AlbumTitle","_ref2","artist","AlbumTitleBox","_templateObject6","Release","_ref3","_ref3$pageContext","pageContext","description","lyrics","credits","bandcampPlayer","artistTitle","svgLinks","each","link","key","Layout","goBackTo","release_AlbumTitle","release_StreamIcons","components_BandcampPlayer"],"mappings":"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","file":"component---src-templates-release-tsx-16817bd10511d3396696.js","sourcesContent":["import * as React from 'react'\nimport _ from 'lodash'\nimport styled from 'styled-components'\n\nimport { Box } from '@components/UI'\n\n// STODO\nimport spinner from '@images/ui/loading_spinner_01.gif'\n\n// STODO use same IFrame everywhere, search global for IFrame and iframe\nconst IFrame = styled.iframe`\n  background-image: url(\"${spinner}\");   \n  background-repeat: no-repeat;\n  background-position: 50% 100px;\n  border: 0;\n`\n\ntype BandcampPlayerProps = { url: string; title: string; height: number }\nclass BandcampPlayer extends React.Component<\n  BandcampPlayerProps,\n  { width: number }\n> {\n  container = React.createRef<HTMLElement>()\n\n  state = { width: 0 }\n\n  updateDimensions = _.throttle(\n    () => {\n      const { width } = this.state\n      const newWidth = _.get(this.container, 'current.offsetWidth', width)\n\n      if (newWidth !== width) {\n        this.setState({ width: newWidth })\n      }\n    },\n    200,\n    { leading: false, trailing: true }\n  )\n\n  componentDidMount() {\n    this.setState({ width: this.container.current.offsetWidth })\n    window.addEventListener('resize', this.updateDimensions)\n  }\n\n  render() {\n    const { title, url, height } = this.props\n    const { width } = this.state\n\n    const calcHeight = height - 354 + width\n\n    return (\n      <Box ref={this.container} minWidth={['300px', '354px']}>\n        <IFrame\n          title={title}\n          width=\"100%\"\n          height={`${calcHeight}px`}\n          src={url}\n          seamless\n        />\n      </Box>\n    )\n  }\n}\n\nexport default BandcampPlayer\n","import * as React from 'react'\nimport styled from 'styled-components'\nimport _ from 'lodash'\n\nimport BandcampPlayer from '@components/BandcampPlayer'\nimport Layout from '@components/Layout'\nimport { Icons } from '@components/Social'\nimport UI, { Flex, Box, Text, H1, H2, H3 } from '@components/UI'\nimport { mobileDisplayToggle } from '@utils'\n\nconst Section = styled(Box).attrs({\n  pb: 5\n})``\n\nconst H4 = styled(UI.H4).attrs({\n  color: 'dark'\n})``\n\nconst StreamIcons = ({\n  mobile,\n  links\n}: {\n  mobile?: boolean\n  links: Record<string, string>\n}) => (\n  <Icons\n    links={links}\n    pb={[1, 1, 5]}\n    pl={[2, 2, 0]}\n    pt={[2, 2, 0]}\n    width=\"100%\"\n    iconMaxWidth=\"53px\"\n    maxWidth={['420px', '354px']}\n    mx={['auto', 0, 0]}\n    display={mobileDisplayToggle(mobile, 'flex')}\n  />\n)\n\nconst InfoWrap = styled(Flex).attrs({\n  pl: [0, 0, 4],\n  pt: [3, 3, 0],\n  pr: 2,\n  flexDirection: 'column'\n})``\n\nconst PlayerWrap = styled(Flex).attrs({\n  mx: ['auto', 'auto', '0px'],\n  maxWidth: ['420px', '360px', '360px'],\n  minWidth: '360px',\n  flexDirection: 'column'\n})``\n\nconst Container = styled(Flex).attrs({\n  flexDirection: ['column', 'column', 'row']\n})``\n\nconst AlbumTitle = ({\n  title,\n  artist,\n  mobile\n}: {\n  title: string\n  artist: string\n  mobile?: boolean\n}) => {\n  const AlbumTitleBox = styled(Box).attrs({\n    display: mobileDisplayToggle(mobile, 'initial')\n  })``\n  return (\n    <AlbumTitleBox pb={[3, 4, 4]}>\n      <H2 pb={1}>{title}</H2>\n      <H4>{`by ${artist}`}</H4>\n    </AlbumTitleBox>\n  )\n}\n\n// STODO read about Record type, make sure I'm using it correctly\ninterface ReleaseProps {\n  pageContext: {\n    title: string\n    artist: string\n    description: string\n    lyrics: string\n    credits: string\n    bandcampPlayer: {\n      url: string\n      height: number\n    }\n    links: Record<string, string>\n  }\n}\n\nconst Release = ({\n  pageContext: {\n    title,\n    artist,\n    description,\n    lyrics,\n    credits,\n    links,\n    bandcampPlayer\n  }\n}: ReleaseProps) => {\n  const artistTitle = `${artist} - ${title}`\n  const svgLinks = {}\n  _.each(links, (link, key) => (svgLinks[`svg_${key}`] = link))\n  return (\n    <Layout goBackTo=\"music\">\n      <Container>\n        <AlbumTitle mobile artist={artist} title={title} />\n        <PlayerWrap>\n          <StreamIcons mobile links={svgLinks} />\n          <BandcampPlayer\n            height={bandcampPlayer.height}\n            url={bandcampPlayer.url}\n            title={artistTitle}\n          />\n        </PlayerWrap>\n        <InfoWrap>\n          <AlbumTitle artist={artist} title={title} />\n          <StreamIcons links={svgLinks} />\n          {description ? (\n            <Section>\n              <H3 pb={1}>Description</H3>\n              <Text color=\"dark\">{description}</Text>\n            </Section>\n          ) : null}\n          {lyrics ? (\n            <Section>\n              <H3 pb={1}>Lyrics</H3>\n              <Text color=\"dark\">{lyrics}</Text>\n            </Section>\n          ) : null}\n          <Section>\n            <H3 pb={1}>Credits</H3>\n            <Text color=\"dark\">{credits}</Text>\n          </Section>\n        </InfoWrap>\n      </Container>\n    </Layout>\n  )\n}\n\nexport default Release\n"],"sourceRoot":""}